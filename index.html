<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css">
  <script  type="importmap">{
	"imports": {
		"three": "https://threejs.org/build/three.module.js",
        "three/addons/": "https://threejs.org/examples/jsm/"
	}
    }</script>
    <script type="module">
        import * as THREE from 'three';
        import {GLTFLoader} from 'three/addons/loaders/GLTFLoader.js';
        
        const sizes = {
        width: window.innerWidth,
        height: window.innerHeight
        }    
        
        let SelectScene1 = true;
        let SelectScene2 = false; 
        let SelectScene3 = false;
    
        function selectScene1(){ 
            SelectScene1 = true;
            SelectScene2 = false; 
            SelectScene3 = false;
            console.log("Scene 1 selectd");
        }
        function selectScene2(){
            SelectScene1 = false;
            SelectScene2 = true; 
            SelectScene3 = false;
            console.log("Scene 2 selectd");
        }
        function selectScene3(){
            SelectScene1 = false;
            SelectScene2 = false; 
            SelectScene3 = true;
            console.log("Scene 3 selectd");
        }
        document.getElementById("b1").onclick = function() {selectScene1()};
        document.getElementById("b2").onclick = function() {selectScene2()};
        document.getElementById("b3").onclick = function() {selectScene3()};

        function main() {

            
            const gltfLoader = new GLTFLoader();
            const canvas = document.querySelector('#c');
            const renderer = new THREE.WebGLRenderer({alpha: false, antialias: true, canvas});
            renderer.setSize(sizes.width,sizes.height);
            const fov = 75;
            const aspect = sizes.width / sizes.height;  // the canvas default
            const near = 0.1;
            const far = 100;
            const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
            camera.position.z = 2;
            const scene1 = new THREE.Scene();
            const scene2 = new THREE.Scene();
            const scene3 = new THREE.Scene();
            
            const sky_tex = new THREE.TextureLoader().load('sky.jpg');
            
            scene1.background = sky_tex;
            scene2.background = sky_tex;
            scene3.background = sky_tex;
            
            var ball;

            const url = 'ball.glb';
            gltfLoader.load(url, (gltf) => {
                ball = gltf.scene;
                scene1.add(ball);
            });

            const geometry1 = new THREE.BoxGeometry(1, 1, 1);
            const geometry2 = new THREE.BoxGeometry(1, 2, 1);
            const geometry3 = new THREE.BoxGeometry(0.5, 1, .5);
            const material1 = new THREE.MeshPhongMaterial({color: 0xff0000});
            const material2 = new THREE.MeshPhongMaterial({color: 0x44aa88});
            const material3 = new THREE.MeshPhongMaterial({color: 0x44aa00});
            const cube1 = new THREE.Mesh(geometry1, material1);
            const cube2 = new THREE.Mesh(geometry2, material2);
            const cube3 = new THREE.Mesh(geometry3, material3);
            //scene1.add(cube1);
            scene2.add(cube2);
            scene3.add(cube3);
            const color = 0xFFFFFF;
            const intensity = 6;
            const light1 = new THREE.DirectionalLight(color, intensity);
            const light2 = new THREE.DirectionalLight(color, intensity);
            const light3 = new THREE.DirectionalLight(color, intensity);
            light1.position.set(-2, 4, 4);
            light2.position.set(-1, 2, 4);
            light3.position.set(-1, 2, 4);
            scene1.add(light1);
            scene2.add(light2);
            scene3.add(light3);
    
    
            function render(time) {
                time *= 0.001;  // convert time to seconds
    
                ball.rotation.y = time*2;

                cube1.rotation.x = time;
                cube1.rotation.y = time;
                cube2.rotation.x = time*2;
                cube2.rotation.y = time*2;
                cube3.rotation.x = time*3;
                cube3.rotation.y = time*3;
                if(SelectScene1 === true)
                {    
                    renderer.render(scene1, camera);
                }
                if(SelectScene2 === true)
                {    
                    renderer.render(scene2, camera);
                }
                if(SelectScene3 === true)
                {    
                    renderer.render(scene3, camera);
                }
                requestAnimationFrame(render);
            }
            requestAnimationFrame(render);
        }
        main();
    
        </script>
</head>
<body>
<canvas id="c"></canvas>
<div id="cScenes">
    <button id="b1" >Scene1</button>
    <button id="b2" >Scene2</button>
    <button id="b3" >Scene3</button>
</div>
</body>
</html>